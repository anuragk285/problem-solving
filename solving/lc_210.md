# Course Schedule II

```java
class Solution {
    HashMap<Integer, ArrayList<Integer>> pre = new HashMap<>();
    HashSet<Integer> coursesDone = new HashSet<>();
    ArrayList<Integer> ansList = new ArrayList<>();
    public int[] findOrder(int numCourses, int[][] prerequisites) {
        for(int[] p : prerequisites){
            pre.putIfAbsent(p[0], new ArrayList<Integer>());
            pre.get(p[0]).add(p[1]);
        }
        for(int course=0; course<numCourses; course++){
            if(!coursesDone.contains(course)){
                boolean canBeDone = dfs(course, new HashSet<Integer>());
                if(!canBeDone) return new int[0];
            }
        }
        int[] ans = new int[ansList.size()];
        for(int i=0; i<ans.length; i++) ans[i] = ansList.get(i);
        return ans;
    }
    private boolean dfs(int course, HashSet<Integer> path){
        if(path.contains(course)) return false;
        if(coursesDone.contains(course)) return true;
        if(!pre.containsKey(course)){
            ansList.add(course);
            coursesDone.add(course);
            return true;
        }
        path.add(course);
        for(int parentCourse : pre.get(course)){
            boolean canBeDone = dfs(parentCourse, path);
            if(!canBeDone) return false;
        }
        path.remove(course);
        ansList.add(course);
        coursesDone.add(course);
        return true;
    }
}

```
