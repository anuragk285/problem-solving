# Number of ways to divide a long corridor

```java
class Solution {
    int length;
    String s;
    long mod = 1_000_000_007L;
    long[][] cache;
    public int numberOfWays(String corridor) {
        length = corridor.length();
        s = corridor;
        cache = new long[length][3];
        int totalSeats = 0;
        for(int i=0; i<length; i++){
            if(s.charAt(i) == 'S') totalSeats++;
            for(int j=0; j<3; j++) cache[i][j] = -1;
        }
        if(totalSeats%2 != 0) return 0;
        return (int)(dfs(0, 0)%mod);
    }
    private long dfs(int i, int seats){
        if(i == length) return seats == 2 ? 1 : 0;
        if(cache[i][seats] != -1) return cache[i][seats];
        char c = s.charAt(i);
        long res = 0;
        if(seats == 2){
            if(c == 'S') res = dfs(i+1, 1);
            else res = (dfs(i+1, 2) + dfs(i+1, 0))%mod;
        }else{
            if(c == 'S') res += dfs(i+1, seats+1);
            else res = dfs(i+1, seats);
        }
        cache[i][seats] = res;
        return res;
    }   
}
```
