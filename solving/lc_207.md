# Course Schedule

```java
class Solution {
    HashMap<Integer, ArrayList<Integer>> pre = new HashMap<>();
    HashSet<Integer> coursesDone = new HashSet<>();
    public boolean canFinish(int numCourses, int[][] prerequisites) {
        for(int[] p : prerequisites){
            pre.putIfAbsent(p[0], new ArrayList<Integer>());
            pre.get(p[0]).add(p[1]);
        }
        for(int course=0; course<numCourses; course++){
            if(!coursesDone.contains(course)){
                boolean canBeDone = dfs(course, new HashSet<Integer>());
                if(!canBeDone) return false;
            }
        }
        return true;
    }
    private boolean dfs(int course, HashSet<Integer> path){
        if(path.contains(course)) return false;
        if(coursesDone.contains(course)) return true;
        if(!pre.containsKey(course)){
            coursesDone.add(course);
            return true;
        }
        path.add(course);
        for(int parentCourse : pre.get(course)){
            boolean canBeDone = dfs(parentCourse, path);
            if(!canBeDone) return false;
        }
        path.remove(course);
        coursesDone.add(course);
        return true;
    }
}
```
