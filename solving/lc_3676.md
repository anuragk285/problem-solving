# Count bowl substrings

```python
class Solution(object):
    def bowlSubarrays(self, nums):
        """
        :type nums: List[int]
        :rtype: int
        """
        Lge = [-float("inf")]
        left_max = nums[0]
        left_max_index = 0
        for i in range(1, len(nums)):
            Lge.append((left_max, left_max_index))
            if left_max < nums[i]:
                left_max = nums[i]
                left_max_index = i
                
        Rge = [-float("inf")]
        right_max = nums[-1]
        right_max_index = len(nums)-1
        for i in range(len(nums)-2, -1, -1):
            Rge.append((right_max, right_max_index))
            if right_max < nums[i]:
                right_max = nums[i]
                right_max_index = i
        Rge = Rge[::-1]
        count = 0
        for i in range(1, len(nums)-1):
            if nums[i] < Lge[i][0] and nums[i] < Rge[i][0]:
                if Rge[i][1] - Lge[i][1] + 1 >= 3:
                    count += 1
        return count
```
